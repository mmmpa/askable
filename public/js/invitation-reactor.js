!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=62)}({0:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),i(e,[{key:"render",value:function(){var t=this.props,e=["fa"];return e.push("fa-"+t.icon),t.scale&&e.push("fa-"+t.scale+"x"),(void 0===t.fixedWidth||t.fixedWidth===!0)&&e.push("fa-fw"),t.list&&e.push("fa-li"),t.border&&e.push("fa-border"),t.pull&&e.push("fa-pull-"+t.pull),t.animation&&e.push("fa-"+t.animation),t.rotate&&e.push("fa-rotate-"+t.rotate),t.flip&&e.push("fa-flip-"+t.flip),React.createElement("i",{className:e.join(" ")})}}]),e}(React.Component);e.default=a},1:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=e.ComponentComponent=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"dispatch",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=this.context.emitter).emit.apply(e,[t].concat(r))}},{key:"componentWillMount",value:function(){this.setState(this.initialState(this.props))}},{key:"initialState",value:function(t){return{}}}]),e}(React.Component);e.ContextComponent=function(t){function e(t){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"componentWillUnmount",value:function(){var t=this;this.addedOnStore.map(function(e){var n=e.eventName,r=e.callback;return t.emitter.removeListener(n,r),n})}},{key:"componentWillMount",value:function(){var t=this;i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this),this.emitter||(this.emitter=this.context.emitter||new EventEmitter,this.listen(function(e,n){t.addedOnStore.push({eventName:e,callback:n}),t.emitter.on(e,n)}))}},{key:"getChildContext",value:function(){return{emitter:this.context.emitter||this.emitter}}},{key:"render",value:function(){var t=Object.assign({},this.props,this.state);delete t.children;var e=this.props.children;return React.createElement("div",{className:"context-wrapper"},e.map(function(e,n){return React.cloneElement(e,Object.assign(t,{key:n}))}))}},{key:"addedOnStore",get:function(){return this._addedOnStore||(this._addedOnStore=[]),this._addedOnStore}}]),e}(u)},2:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.State={Waiting:0,Submitting:1,Fail:2,Success:3}},28:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),s=n(3),l=r(s),f=n(2),p=n(0),d=(r(p),n(4)),m=r(d),h=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"succeed",value:function(){location.reload()}},{key:"setBase",value:function(t){return t.invitationId=this.invitationId,t}},{key:"submit",value:function(t){var e=this;this.setState({state:f.State.Submitting}),t(this.setBase({})).then(function(){e.resultMessage(t);location.reload()}).catch(function(t){var n=t.errors;e.setState({errors:n,state:f.State.Fail})})}},{key:"resultMessage",value:function(t){switch(t){case l.default.acceptInvitation:return"Joined";case l.default.rejectInvitation:return"Rejected";case l.default.blockInvitation:return"Blocked"}}},{key:"listen",value:function(t){var e=this;t("accept",function(){e.submit(l.default.acceptInvitation)}),t("reject",function(){e.submit(l.default.rejectInvitation)}),t("block",function(){e.submit(l.default.blockInvitation)})}},{key:"initialState",value:function(t){return{state:f.State.Waiting}}},{key:"invitationId",get:function(){return this.props.invitationId}}]),e}(c.ContextComponent),v=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),u(e,[{key:"writeForm",value:function(){var t=this,e=this.props.state;return React.createElement("section",{className:"reactor body"},React.createElement(m.default,{state:e,icon:"thumbs-o-up",text:"Accept",className:"submit",onClick:function(){return t.dispatch("accept")}}),React.createElement(m.default,{state:e,icon:"trash",text:"Reject",className:"reject",onClick:function(){return t.dispatch("reject")}}),React.createElement(m.default,{state:e,icon:"ban",text:"Block",className:"reject",onClick:function(){return t.dispatch("block")}}))}},{key:"writeResult",value:function(){return React.createElement("section",{className:"reactor body"},React.createElement("div",{className:"com success-message reactor completed"},this.props.result))}},{key:"render",value:function(){switch(this.props.state){case f.State.Success:return this.writeResult();case f.State.Submitting:case f.State.Waiting:case f.State.Fail:default:return this.writeForm()}}}]),e}(c.ComponentComponent),y=function(){function t(){o(this,t)}return u(t,null,[{key:"start",value:function(t){t&&t.forEach(function(t){var e=t.getAttribute("data-id");ReactDOM.render(React.createElement(h,{invitationId:e},React.createElement(v,null)),t)})}}]),t}();window.InvitationReactor=y},3:function(t,e){"use strict";function n(t,e){return new Promise(function(n,o){r(t,e,n,o)})}function r(t,e,n,r){f=f.then(function(){return new Promise(function(i,a){o(t,e,n,r,i)})})}function o(t,e,n,r,o){var a=t.uri;if(a.indexOf(":")!==-1)var u=s(a,e),c=u.normalized,l=u.trimmed;i(n,r,o,c||a,t.method,t.params(l||e))}function i(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};a(r,o).send(i).end(c(t,e,n))}function a(t,e){var n=u(request,t,e);return e===p.Get?n:n.set("X-CSRF-Token",l())}function u(t,e,n){switch(n){case p.Get:return t.get(e);case p.Post:return t.post(e);case p.Patch:return t.patch(e);case p.Put:return t.put(e);case p.Delete:return t.delete(e)}}function c(t,e,n){return function(r,o){r?e(o.body&&o.body.errors?o.body:{errors:{unknown:[r]}}):t(o.body),n()}}function s(t,e){var n=e.questionId;delete e.questionId;var r=e.groupId;delete e.groupId;var o=e.commentId;delete e.commentId;var i=e.invitationId;delete e.invitationId;var a=e.messageId;delete e.messageId;var u=t.replace(":messageId",a).replace(":invitationId",i).replace(":questionId",n).replace(":commentId",o).replace(":groupId",r);return{trimmed:e,normalized:u}}function l(){try{return document.getElementsByName("csrf-token")[0].getAttribute("content")}catch(t){return""}}Object.defineProperty(e,"__esModule",{value:!0}),e.strike=n;var f=Promise.resolve(),p={Get:0,Post:1,Patch:2,Put:3,Delete:4},d={};e.default=d;var m=e.Api={disposeMessage:{uri:"/m/:messageId",method:p.Delete,params:function(t){return t}},invite:{uri:"/g/:groupId/invitation",method:p.Post,params:function(t){return{invitations:t}}},disposeGroup:{uri:"/g/:groupId",method:p.Delete,params:function(t){return t}},createGroup:{uri:"/g/new",method:p.Post,params:function(t){return{groups:t}}},acceptInvitation:{uri:"/i/:invitationId/accept",method:p.Patch,params:function(t){return t}},rejectInvitation:{uri:"/i/:invitationId/reject",method:p.Patch,params:function(t){return t}},blockInvitation:{uri:"/i/:invitationId/block",method:p.Patch,params:function(t){return t}},createQuestion:{uri:"/g/:groupId/me/q/new",method:p.Post,params:function(t){return{questions:t}}},answerQuestion:{uri:"/g/:groupId/q/:questionId/answer",method:p.Patch,params:function(t){return{questions:t}}},assignUserQuestion:{uri:"/g/:groupId/q/:questionId/assign",method:p.Patch,params:function(t){return{questions:t}}},waitAnswerQuestion:{uri:"/g/:groupId/q/:questionId/wait",method:p.Patch,params:function(t){return{}}},sorryQuestion:{uri:"/g/:groupId/q/:questionId/sorry",method:p.Patch,params:function(t){return{}}},replyToReply:{uri:"/g/:groupId/q/:questionId/a/:commentId/res",method:p.Post,params:function(t){return{questions:t}}},finishQuestion:{uri:"/g/:groupId/q/:questionId/finish",method:p.Patch,params:function(t){return{}}},logIn:{uri:"/in",method:p.Post,params:function(t){return{user_sessions:t}}},logOut:{uri:"/out",method:p.Delete,params:function(t){return{}}},createUser:{uri:"/welcome/new",method:p.Post,params:function(t){return{users:t}}},updateUser:{uri:"/me",method:p.Patch,params:function(t){return{users:t}}},destroyUser:{uri:"/me",method:p.Delete,params:function(t){return{}}},changePassword:{uri:"/me/password",method:p.Patch,params:function(t){return t.password_now=t.passwordNow,delete t.passwordNow,{users:t}}}};!function(){var t=function(t){d[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.apply(void 0,[m[t]].concat(r))}};for(var e in m)t(e)}()},4:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),s=n(2),l=n(0),f=r(l),p=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"render",value:function(){var t=this.props,e=t.text,n=t.onClick,r=t.icon,o=t.state,i=t.disabled,a=this.className;switch(o){case s.State.Submitting:return React.createElement("button",{className:this.className,disabled:!0},React.createElement(f.default,{icon:"spinner",animation:"pulse"}),e);case s.State.Success:case s.State.Waiting:case s.State.Fail:default:return React.createElement("button",{className:a,disabled:i,onClick:function(t){t.preventDefault(),n(t)}},React.createElement(f.default,{icon:r}),e)}}},{key:"className",get:function(){var t=this.props,e=t.className,n=t.state;return e+(n===s.State.Submitting?" sending":" ready")}}]),e}(c.ComponentComponent);e.default=p},62:function(t,e,n){t.exports=n(28)}});